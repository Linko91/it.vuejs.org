
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Reattività nel Dettaglio - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Libreria intuitiva, veloce per costruire interfacce interattive tramite MVVM.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:300,500&text=Vue.js' rel='stylesheet' type='text/css'>
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guida"
        </script>
        <link rel="stylesheet" href="/css/page.css">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46852172-1', 'vuejs.org');
  ga('send', 'pageview');
</script>
        <script src="/js/vue.js"></script>
    </head>
    <body>
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        
            <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Vue.js</span>
    </a>
    <ul id="nav">
        <li>
  <form id="search-form">
    <input type="text" id="search-query" class="st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guida</a></li>
<li><a href="/api/" class="nav-link">API</a></li>
<li><a href="/examples/" class="nav-link">Esempi</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Forum</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
</div>
            <div id="main">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query" class="st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guida</a></li>
<li><a href="/api/" class="nav-link">API</a></li>
<li><a href="/examples/" class="nav-link">Esempi</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Forum</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <div id="donate" style="margin-bottom: 20px">
            <span class="wrapper" style="width: 110px">
                <img src="/images/patreon.png">
                <a href="/support-vuejs">Dona a Vue.js</a>
            </span>
         </div>
        <h2>
            Guida
            <select class="version-select">
                <option selected>1.0.*</option>
                <option>0.12</option>
                <option>0.11</option>
            </select>
        </h2>
        <ul class="menu-root">
            
                <li>
                    <a href="/guide/installation.html" class="sidebar-link">Installazione</a>
                </li>
            
                <li>
                    <a href="/guide/index.html" class="sidebar-link">Per Iniziare</a>
                </li>
            
                <li>
                    <a href="/guide/overview.html" class="sidebar-link">Panoramica</a>
                </li>
            
                <li>
                    <a href="/guide/instance.html" class="sidebar-link">L'instanza di Vue</a>
                </li>
            
                <li>
                    <a href="/guide/syntax.html" class="sidebar-link">Two Way Binding nel Dettaglio</a>
                </li>
            
                <li>
                    <a href="/guide/computed.html" class="sidebar-link">Proprietà Derivate</a>
                </li>
            
                <li>
                    <a href="/guide/class-and-style.html" class="sidebar-link">Vincolo sul CSS</a>
                </li>
            
                <li>
                    <a href="/guide/conditional.html" class="sidebar-link">Rendering Condizionato</a>
                </li>
            
                <li>
                    <a href="/guide/list.html" class="sidebar-link">Rendering di Liste</a>
                </li>
            
                <li>
                    <a href="/guide/events.html" class="sidebar-link">Gestione degli Eventi e dei Metodi</a>
                </li>
            
                <li>
                    <a href="/guide/forms.html" class="sidebar-link">Vincolo sugli input dei Form</a>
                </li>
            
                <li>
                    <a href="/guide/transitions.html" class="sidebar-link">Transizioni</a>
                </li>
            
                <li>
                    <a href="/guide/components.html" class="sidebar-link">Componenti</a>
                </li>
            
                <li>
                    <a href="/guide/reactivity.html" class="sidebar-link current">Reattività nel Dettaglio</a>
                </li>
            
                <li>
                    <a href="/guide/custom-directive.html" class="sidebar-link">Direttive Personalizzate</a>
                </li>
            
                <li>
                    <a href="/guide/custom-filter.html" class="sidebar-link">Filtri Personalizzati</a>
                </li>
            
                <li>
                    <a href="/guide/mixins.html" class="sidebar-link">Mixins</a>
                </li>
            
                <li>
                    <a href="/guide/plugins.html" class="sidebar-link">Plugins</a>
                </li>
            
                <li>
                    <a href="/guide/application.html" class="sidebar-link">Costruire un'Applicazione scalabile</a>
                </li>
            
                <li>
                    <a href="/guide/comparison.html" class="sidebar-link">Confronto con altri Framework</a>
                </li>
            
        </ul>
    </div>
</div>


<div class="content guida with-sidebar">
    <div id="ad">
  <a href="https://strikingly.com/s/careers?utm_source=v" target="_blank">
    <span>Fieramente Sponsorizzato da</span><br>
    <img src="/images/strikingly.png">
  </a>
</div>

    <h1>Reattività nel Dettaglio</h1>
    <p>Abbiamo visto tutte le basi per utilizzare VueJs - ora è tempo di guardare nel dettaglio alcune parti fondamentali, la prima che andremo ad affrontare è una delle più importanti e meno visibili di VueJs, il sistema di reattività. La reattività è tutto quel sistema che vi permette di aggiornare gli oggetti Javascript della vostra istanza. La reattività rende la gestione dello stato veramente semplice ed intuitiva, ma è anche importante e bisogna capire come funziona per evitare sorprese in futuro. In questa sezione andremo ad analizzare nel dettagli il sistema di reattività per capire come funziona dietro le quinte.</p>
<h2 id="Come-vengono-tracciati-i-Cambiamenti"><a href="#Come-vengono-tracciati-i-Cambiamenti" class="headerlink" title="Come vengono tracciati i Cambiamenti"></a>Come vengono tracciati i Cambiamenti</h2><p>Quando passate un oggetto Javascript ad un’istanza Vue, ovvero alla sua opzione <code>data</code>, Vue.js in primis analizzerà tutte le sue proprietà e le convertirà in getter/setter usando la funzione <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="external">Object.defineProperty</a>. Questa funzione è disponibile sono da ES5 in su, per questo Vue.js non supportà IE8 e predecessori.</p>
<p>I getter/setters saranno invisibili all utente, ma dietro le quinte questi nuovi metodi permettono a Vue.js di tracciare i cambiamenti e di effetturare un tracciamento delle dipendenze esterne per quell oggetto specifico. Da notare che il browser formattano i getter/setter in maniera diversa rispetto a Vue.js, perciò quando volete effettuare il log di un oggetto è preferibile usare <code>vm.$log()</code> piuttosto che il log nativo del browser.</p>
<p>Per ogni direttiva / vincolo di dati nel template, ci sarà un <strong>watcher</strong> dedicato, che tiene traccia di ogni cambiamento sia che proviene dal DOM, il quale va aggiornare il corrispettivo setter, sia che provenga da Vuejs, il quale andrà aggiornate il corrispettivo getter.</p>
<p><img src="/images/data.png" alt="data"></p>
<h2 id="Trucchi-per-determinare-i-Cambiamenti"><a href="#Trucchi-per-determinare-i-Cambiamenti" class="headerlink" title="Trucchi per determinare i Cambiamenti"></a>Trucchi per determinare i Cambiamenti</h2><p>Date alcune limitazioni di ES5, Vue.js <strong>non può capire quando una proprietà viene aggiunta od eliminata</strong> dato Vue.js crea questi getter/setter dedicati, se vengono aggiunte proprietà al di fuori, esse non saranno reattive, per esempio:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123; a: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: data</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// `vm.a` e `data.a` non sono reattivi</span></span><br><span class="line"></span><br><span class="line">vm.b = <span class="number">2</span></span><br><span class="line"><span class="comment">// `vm.b` non è reattivo</span></span><br><span class="line"></span><br><span class="line">data.b = <span class="number">2</span></span><br><span class="line"><span class="comment">// `data.b` non è reattivo</span></span><br></pre></td></tr></table></figure>
<p>Però, <strong>c’è un modo per aggiungere una proprietà reattiva</strong> dopo che l’istanza è stata creata.</p>
<p>Per Vue in particolare, si può usare il metodo <code>$set(path, value)</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">vm.$set(<span class="string">'b'</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment">// `vm.b` e `data.b` saranno reattivit</span></span><br></pre></td></tr></table></figure>
<p>Per un oggetto, potete usare il metodo globale <code>Vue.set(object, key, value)</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.set(data, <span class="string">'c'</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// `vm.c` w `data.c` ora sono reattivi</span></span><br></pre></td></tr></table></figure>
<p>Qualche voltra avrete bisogno di assegnare un numero di properità ad un oggetto già esistente, per esempio utilizzando <code>Object.assign()</code> o <code>_.extend()</code>. Comunque le nuove properità non saranno reattive, per far si che lo diventino bisogna riassegnare l’oggetto in questa maniera:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  invece di `Object.assign(this.someObject, &#123; a: 1, b: 2 &#125;)`</span></span><br><span class="line"><span class="keyword">this</span>.someObject = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.someObject, &#123; a: <span class="number">1</span>, b: <span class="number">2</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>Ci sono anche alcuni trucchi per gli Array, discussi in <a href="/guide/list.html#Caveats">precedenza sulla guida alle liste</a>.</p>
<h2 id="Inizializzare-i-Vostri-Dati"><a href="#Inizializzare-i-Vostri-Dati" class="headerlink" title="Inizializzare i Vostri Dati"></a>Inizializzare i Vostri Dati</h2><p>Nonostante esistano delle API che permettano di dichiarare in modo dinamico le proprietà reattive, è sempre consigliato farlo inizialmente, con l’opzione <code>data</code>.</p>
<p>Invece di questo::</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  template: <span class="string">'&lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// aggiungi `msg` dopo</span></span><br><span class="line">vm.$set(<span class="string">'msg'</span>, <span class="string">'Hello!'</span>)</span><br></pre></td></tr></table></figure>
<p>E’ consigliato questo:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    <span class="comment">// dichiarare msg dentro data anche se vuoto</span></span><br><span class="line">    msg: <span class="string">''</span></span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">'&lt;div&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// impostare msg dopo</span></span><br><span class="line">vm.msg = <span class="string">'Hello!'</span></span><br></pre></td></tr></table></figure>
<p>Vi sono anche due ragioni dietro questo suggerimento:</p>
<ol>
<li><p>L’oggetto <code>data</code> è come lo schema per il vostro componente ed il suo stato. Dichiarare tutte le properità al suo interno rende il componente più facile da capire ed utilizzare.</p>
</li>
<li><p>Aggiungere una properità reattiva al livello alto della vostra istanza Vue obbligherà i watchers a rivalutare l’istanza stessa, perché non esiste un watcher che aveva tale properità come dipendenza. Le prestazioni di tale operazione sono accettabili (e sono molto simili alle prestazioni del controllo analogo su Angular), ma si possono evitare problemi con la dichiarazione delle properità nell oggetto data.</p>
</li>
</ol>
<h2 id="Coda-di-aggiornamento-Asincrona"><a href="#Coda-di-aggiornamento-Asincrona" class="headerlink" title="Coda di aggiornamento Asincrona"></a>Coda di aggiornamento Asincrona</h2><p>Per definizione, Vue.js aggiorna il DOM della pagina in modo <strong>asincrono</strong>. Ogni volta che un dato cambia, Vue aprirà una cosa e metterà in buffer tutti i cambiamenti avvenuti. Se un watcher viene richiamato più volte verrà messo in coda solo una volta sola ed al successivo ciclo di aggiornamento verrà fatto uscire dalla coda ed eseguito. Di default Vue usa un <code>MutationObserver</code> per gestire la coda asincrona, ma puoi anche ripiegare su <code>setTimeout(fn, 0)</code> se necessario.</p>
<p>Un esempio, volete impostare <code>vm.someData = &#39;new value&#39;</code>, il DOM non verrà aggiornato automaticamente ma al successivo “tick”, quando la coda viene interrogata e liberata. La maggior parte delle volte tale comportamento va bene, e non ci accorgiamo nemmeno del tick di differenza ma in alcune sicutazioni, come uno stato che dipende da un altro aggiornamento precedente, la differenza di update può essere notata. La filosofia di Vue.js vi incoraggia sempre a pensare prima ai dati, senza toccare il DOM in maniera diretta, con aggiornamenti che dipendono da altri, però a volte è necessario per questo esiste un metodo chiamato <code>Vue.nextTick(callback)</code> che viene chiamato immediatamento ignorando la coda:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">'123'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.msg = <span class="string">'new message'</span> <span class="comment">// cabio di dati</span></span><br><span class="line">vm.$el.textContent === <span class="string">'new message'</span> <span class="comment">// false</span></span><br><span class="line">Vue.nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  vm.$el.textContent === <span class="string">'new message'</span> <span class="comment">// true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Naturalmente il sistema <code>vm.$nextTick()</code> può essere usato anche per i componenti, dato che è un metodo globale lo troverete nello scope di <code>this</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">'example'</span>, &#123;</span><br><span class="line">  template: <span class="string">'&lt;span&gt;&#123;&#123;msg&#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'not updated'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updateMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.msg = <span class="string">'updated'</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// =&gt; 'non aggiornato'</span></span><br><span class="line">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$el.textContent) <span class="comment">// =&gt; 'aggiornato'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Le-proprieta-derivate"><a href="#Le-proprieta-derivate" class="headerlink" title="Le proprietà derivate"></a>Le proprietà derivate</h2><p>Come visto in precedenza, Vue.js <strong>non</strong> tratta le proprietà derivate come dei semplici getter. Ogni proprietà derivata tiene traccia delle dipendenze a lei associate, ovvero le proprietà dalla quale deriva. Quando una properità derivata viene richiamata, Vue.js aggiorna la lista delle dipendenze di tale proprietà e tiene in cache il risultato. Tale cache viene invalidata, e ricalcolata, ogni volta che una dipendenza cambia stato/valore. Questo fa si che se non viene cambiato lo stato, la proprietà derivata accederà sempre e solo al valore salvato nella cache, invece di richiamare la properità tramite un getter.</p>
<p>Perché abbiamo bisogno del sistema di caching? Immaginate di avere una proprietà derivata che effettua molte istruzioni, portando via tempo computazionale, chiamiamola <strong>A</strong>. Poi abbiamo un’altra properità derivata che dipende da <strong>A</strong>, ogni volta che viene chiamata questa nuova properità derivata <strong>A</strong> dovrebbe rifare tutti i calcoli!</p>
<p>A causa del sistema di cachine, la funzione di getter non viene sempre richiamata ma, considerate il seguente esempio:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">'ciao'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    example: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Date</span>.now() + <span class="keyword">this</span>.msg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>La properità derivata <code>example</code> ha solo una dipendenza: <code>vm.msg</code>. <code>Date.now()</code> <strong>non è</strong> una dipendenza reattiva, perché non ha niente a che fare con il sistema di osservamento dati di Vue. Ogni volta che <code>example</code> verrà chiamata, la data calcolata sarà sempre la stesse a meno che <code>vm.msg</code> non scateni una rivalutazione, tramite cambiamento del suo stato.</p>
<p>In alcuni casi avrete bisogno di ottenere sempre il getter senza cache. Potete farlo disattivando la cache per ogni properità derivata:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  example: &#123;</span><br><span class="line">    cache: <span class="literal">false</span>, <span class="comment">// Ora non viene più usata la cache</span></span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Date</span>.now() + <span class="keyword">this</span>.msg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ogni volta che accedete a <code>vm.example</code>, la data cambierà sempre. <strong>Attenzione però, questo aggiornamento affligge solo l’accesso programmatico interno in Javascript; il vincolo dei dati è sempre dipendente.</strong> Quando una proprietà derivata, anche senza cache, viene utilizzata nel template tipo <code>{{example}}</code>, tale elemento del DOM verrà aggiornato se e soltanto se le dipendenze della properità derivata cambiano stato.</p>

    
    <div class="footer">
      Trovato un errore e vuoi contribuire alla documentazione?
      <a href="https://github.com/vuejs/it.vuejs.org/blob/master/src/guide/reactivity.md" target="_blank">
        Modifica questa pagina su Github!
      </a>
    </div>
</div>

                
            </div>
            <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
            <script src="/js/smooth-scroll.min.js"></script>
            <script src="/js/common.js"></script>
        

        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                FastClick.attach(document.body);
            }, false);
        </script>
    </body>
</html>
