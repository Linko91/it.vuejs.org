
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Direttive Personalizzate - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Libreria intuitiva, veloce per costruire interfacce interattive tramite MVVM.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:300,500&text=Vue.js' rel='stylesheet' type='text/css'>
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guida"
        </script>
        <link rel="stylesheet" href="/css/page.css">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46852172-1', 'vuejs.org');
  ga('send', 'pageview');
</script>
        <script src="/js/vue.js"></script>
    </head>
    <body>
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        
            <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>Vue.js</span>
    </a>
    <ul id="nav">
        <li>
  <form id="search-form">
    <input type="text" id="search-query" class="st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guida</a></li>
<li><a href="/api/" class="nav-link">API</a></li>
<li><a href="/examples/" class="nav-link">Esempi</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Forum</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
</div>
            <div id="main">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query" class="st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guida</a></li>
<li><a href="/api/" class="nav-link">API</a></li>
<li><a href="/examples/" class="nav-link">Esempi</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">Community</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Forum</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <div id="donate" style="margin-bottom: 20px">
            <span class="wrapper" style="width: 110px">
                <img src="/images/patreon.png">
                <a href="/support-vuejs">Dona a Vue.js</a>
            </span>
         </div>
        <h2>
            Guida
            <select class="version-select">
                <option selected>1.0.*</option>
                <option>0.12</option>
                <option>0.11</option>
            </select>
        </h2>
        <ul class="menu-root">
            
                <li>
                    <a href="/guide/installation.html" class="sidebar-link">Installazione</a>
                </li>
            
                <li>
                    <a href="/guide/index.html" class="sidebar-link">Per Iniziare</a>
                </li>
            
                <li>
                    <a href="/guide/overview.html" class="sidebar-link">Panoramica</a>
                </li>
            
                <li>
                    <a href="/guide/instance.html" class="sidebar-link">L'instanza di Vue</a>
                </li>
            
                <li>
                    <a href="/guide/syntax.html" class="sidebar-link">Two Way Binding nel Dettaglio</a>
                </li>
            
                <li>
                    <a href="/guide/computed.html" class="sidebar-link">Proprietà Derivate</a>
                </li>
            
                <li>
                    <a href="/guide/class-and-style.html" class="sidebar-link">Vincolo sul CSS</a>
                </li>
            
                <li>
                    <a href="/guide/conditional.html" class="sidebar-link">Rendering Condizionato</a>
                </li>
            
                <li>
                    <a href="/guide/list.html" class="sidebar-link">Rendering di Liste</a>
                </li>
            
                <li>
                    <a href="/guide/events.html" class="sidebar-link">Gestione degli Eventi e dei Metodi</a>
                </li>
            
                <li>
                    <a href="/guide/forms.html" class="sidebar-link">Vincolo sugli input dei Form</a>
                </li>
            
                <li>
                    <a href="/guide/transitions.html" class="sidebar-link">Transizioni</a>
                </li>
            
                <li>
                    <a href="/guide/components.html" class="sidebar-link">Componenti</a>
                </li>
            
                <li>
                    <a href="/guide/reactivity.html" class="sidebar-link">Reattività nel Dettaglio</a>
                </li>
            
                <li>
                    <a href="/guide/custom-directive.html" class="sidebar-link current">Direttive Personalizzate</a>
                </li>
            
                <li>
                    <a href="/guide/custom-filter.html" class="sidebar-link">Filtri Personalizzati</a>
                </li>
            
                <li>
                    <a href="/guide/mixins.html" class="sidebar-link">Mixins</a>
                </li>
            
                <li>
                    <a href="/guide/plugins.html" class="sidebar-link">Plugins</a>
                </li>
            
                <li>
                    <a href="/guide/application.html" class="sidebar-link">Costruire un'Applicazione scalabile</a>
                </li>
            
                <li>
                    <a href="/guide/comparison.html" class="sidebar-link">Confronto con altri Framework</a>
                </li>
            
        </ul>
    </div>
</div>


<div class="content guida with-sidebar">
    <div id="ad">
  <a href="https://strikingly.com/s/careers?utm_source=v" target="_blank">
    <span>Fieramente Sponsorizzato da</span><br>
    <img src="/images/strikingly.png">
  </a>
</div>

    <h1>Direttive Personalizzate</h1>
    <h2 id="Introduzione"><a href="#Introduzione" class="headerlink" title="Introduzione"></a>Introduzione</h2><p>In aggiunta alle varie direttive disponibili di default, Vue.js vi permette di registrare direttive personalizzate. Le direttive personalizzate forniscono dei meccanismi per mappare i cambiamenti dei dati in base ai comportamenti del DOM.</p>
<p>Potete registrare direttive personalizzate tramite il metodo globale <code>Vue.directive(id, definition)</code>, passandogli un <strong>identificativo</strong> seguito da un <strong>oggetto</strong> che definisce la direttiva stessa. La registrazione delle direttive può essere fatta anche localmente ad un componente tramite l’opzione<br><code>directives</code>.</p>
<h3 id="Funzioni"><a href="#Funzioni" class="headerlink" title="Funzioni"></a>Funzioni</h3><p>L’oggetto che definisce una direttiva può implementare diverse funzioni di default (tutte facoltative):</p>
<ul>
<li><p><strong>bind</strong>: chiamata una sola volta, quando la direttiva è legata ad un elemento del DOM.</p>
</li>
<li><p><strong>update</strong>: chiamata inzialmente subito dopo <code>bind</code> con il valore iniziale, successivamente viene chiamata ad ogni cambiamento dei dati. Gli argomenti sono il valore precedente e nuovo.</p>
</li>
<li><p><strong>unbind</strong>: chiamata una sola volta, quando la direttiva viene slegata dall elemento del DOM.</p>
</li>
</ul>
<p><strong>Esempio</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'my-directive'</span>, &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// preparazione della direttiva</span></span><br><span class="line">    <span class="comment">// per esempio aggiungere degli eventi, o calcoli dispendiosi</span></span><br><span class="line">    <span class="comment">// che hanno bisogno solo di una singola chiamata</span></span><br><span class="line">  &#125;,</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">newValue, oldValue</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Logica da implementare per quando si aggiorna il valore</span></span><br><span class="line">  &#125;,</span><br><span class="line">  unbind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Di solito usata per fare pulizia</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Una volta registrata la si può usare come una direttiva normalissima, (ricordatevi di aggiungere il prefisso <code>v-</code>):</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-my-directive</span>=<span class="string">"someValue"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Quando vi serve solo la funzione <code>update</code>, potete usare questa scorciatoia:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'my-directive'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Qui si implementa solo l'update</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Proprieta-di-Istanza-delle-Direttive"><a href="#Proprieta-di-Istanza-delle-Direttive" class="headerlink" title="Proprietà di Istanza delle Direttive"></a>Proprietà di Istanza delle Direttive</h3><p>Tutte le funzioni, i metodi, di base verranno copiati <strong>nell oggetto della direttiva</strong>, il quale permetterà l’accesso a tali metodi tramite il contesto <code>this</code>. Una direttiva istanziata espone alcune importanti ed utili proprietà:</p>
<ul>
<li><strong>el</strong>: l’elemento al quale la direttiva è legato, elemento del DOM.</li>
<li><strong>vm</strong>: il contesto, il ViewModel, che gestisce la direttiva corrente.</li>
<li><strong>expression</strong>: l’espressione usata per il vincolo dei dati, escludendo filtri ed argomenti.</li>
<li><strong>arg</strong>: gli argomenti, se presenti.</li>
<li><strong>name</strong>: il nome della direttiva, senza prefisso <code>v-</code>.</li>
<li><strong>modifiers</strong>: un oggetto che contiene i modificatori di istanza, se ci sono.</li>
<li><strong>descriptor</strong>: un oggetto che contiene il parse di tutta la direttiva.</li>
<li><strong>params</strong>: un oggetto che contiene gli attributi. <a href="#params">Spigati più avanti</a>.</li>
</ul>
<p class="tip">Dovreste veramente trattare tutte le proprietà come properità di sola lettura e mai modificarne lo stato. Potete creare nuove proprietà interne alla direttiva, prestate attenzione a non modificare lo stato delle altre.</p>

<p>Un esempio di una direttiva personalizzata che usa qualche proprietà vista:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">v-demo:hello.a.b</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'demo'</span>, &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'demo legata!'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el.innerHTML =</span><br><span class="line">      <span class="string">'name - '</span> + <span class="keyword">this</span>.name + <span class="string">'&lt;br&gt;'</span> +</span><br><span class="line">      <span class="string">'expression - '</span> + <span class="keyword">this</span>.expression + <span class="string">'&lt;br&gt;'</span> +</span><br><span class="line">      <span class="string">'argument - '</span> + <span class="keyword">this</span>.arg + <span class="string">'&lt;br&gt;'</span> +</span><br><span class="line">      <span class="string">'modifiers - '</span>  + <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.modifiers) + <span class="string">'&lt;br&gt;'</span> +</span><br><span class="line">      <span class="string">'value - '</span> + value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> demo = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#demo'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">'Ciao!'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>Risultato</strong></p>
<p><div id="demo" v-demo:hello.a.b="msg"></div></p>
<script>
Vue.directive('demo', {
  bind: function () {
    console.log('demo legata!')
  },
  update: function (value) {
    this.el.innerHTML =
      'name - ' + this.name + '<br>' +
      'expression - ' + this.expression + '<br>' +
      'argument - ' + this.arg + '<br>' +
      'modifiers - '  + JSON.stringify(this.modifiers) + '<br>' +
      'value - ' + value
  }
})
var demo = new Vue({
  el: '#demo',
  data: {
    msg: 'Ciao!'
  }
})
</script>

<h3 id="Oggetti-Dettagliato"><a href="#Oggetti-Dettagliato" class="headerlink" title="Oggetti Dettagliato"></a>Oggetti Dettagliato</h3><p>Se la vostra direttiva personalizzata si aspetta più argomenti, potete passargli un oggetto dettagliato. Ricordatevi che le direttive accettano qualsiasi esperessione JavaScript valida:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-demo</span>=<span class="string">"&#123; color: 'white', text: 'ciao!' &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'demo'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value.color) <span class="comment">// "white"</span></span><br><span class="line">  <span class="built_in">console</span>.log(value.text) <span class="comment">// "ciao!"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Modificatore-Literal"><a href="#Modificatore-Literal" class="headerlink" title="Modificatore Literal"></a>Modificatore Literal</h3><p>When a directive is used with the literal modifier, its attribute value will be interpreted as a plain string and passed directly into the <code>update</code> method. The <code>update</code> method will also be called only once, because a plain string cannot be reactive.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-demo.literal</span>=<span class="string">"foo bar baz"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'demo'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value) <span class="comment">// "foo bar baz"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Element-Directives"><a href="#Element-Directives" class="headerlink" title="Element Directives"></a>Element Directives</h3><p>In alcuni casi, vorreste poter usare le vostre direttive personalizzate come elementi del DOM invece che come attributi di un elemento. Questo comportamento è molto simile alla nozione “E” delle direttive di Angular. Le direttive come elementi forniscono una struttura del DOM più pulita e leggibile, per registrare una direttiva come elemento dovete seguire questi semplici passaggi:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.elementDirective(<span class="string">'my-directive'</span>, &#123;</span><br><span class="line">  <span class="comment">// Stesse API di una direttiva normale</span></span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// manipola le proprietà</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Poi invece di questo:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-my-directive</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Potete scrivere questo:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-directive</span>&gt;</span><span class="tag">&lt;/<span class="name">my-directive</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Le direttive come elementi non possono accettare argomenti ne espressioni, ma possono leggere i loro attributi per determinare eventuali comportamenti ed azioni.</p>
<p>La differenza più grossa rispetto alle direttive normali è che la direttiva come elemento è <strong>finale</strong> , il che significa che ogni volta che Vue incontra un elemento come direttiva, salterà completamente tale elemento - solo l elemento come direttiva è in grado di manipolare se stesso ed i suoi figli.</p>
<h2 id="Opzioni-avanzate"><a href="#Opzioni-avanzate" class="headerlink" title="Opzioni avanzate"></a>Opzioni avanzate</h2><h3 id="params"><a href="#params" class="headerlink" title="params"></a>params</h3><p>Le direttive personalizzate forniscon un interessante opzione chiamata <code>params</code>, la quale è un array e verrà interpretata da Vue come una lista di attributi da aggiungere all elemento al quale è legata la direttiva personalizzata. Per esempio:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-example</span> <span class="attr">a</span>=<span class="string">"ciao"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'example'</span>, &#123;</span><br><span class="line">  params: [<span class="string">'a'</span>],</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.params.a) <span class="comment">// -&gt; "ciao"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Le API supportano anche gli attributi dinamici. Il valore di <code>this.params[key]</code> viene automaticamente tenuto aggiornato. In aggiunta, puoi specificare una funzione per ogni cambiamento di stato:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-example</span> <span class="attr">v-bind:a</span>=<span class="string">"someValue"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'example'</span>, &#123;</span><br><span class="line">  params: [<span class="string">'a'</span>],</span><br><span class="line">  paramWatchers: &#123;</span><br><span class="line">    a: <span class="function"><span class="keyword">function</span> (<span class="params">val, oldVal</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'a è cambiato!'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p class="tip">Da notare che si deve usare la sintassi camel-case <code>paramWatchers</code>, quasi si hanno attributi scritti in kebab-case.<br>Per esempio, se avete definisto l’attributo come <code>disabilita-effetto</code>, dovrete utilizzare <code>disabilitaEffetto</code> nel <code>paramsWatchers</code>.</p>


<h3 id="deep"><a href="#deep" class="headerlink" title="deep"></a>deep</h3><p>Se la vostra direttiva personalizzata si aspetta un oggetto, e deve sempre attivare la funzione <code>update</code> quando una proprietà interna all oggetto cambia, allora dovete attivare l’opzione <code>deep: true</code> internamente alla direttiva.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-my-directive</span>=<span class="string">"obj"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'my-directive'</span>, &#123;</span><br><span class="line">  deep: <span class="literal">true</span>,</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// verrà chiamato quando la proprietà obj cambia.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="twoWay"><a href="#twoWay" class="headerlink" title="twoWay"></a>twoWay</h3><p>Se la vostra direttiva si aspetta di scrivere dai dati all’istanza di Vue, dovete passare l’opzione <code>twoWay: true</code>. In questo modo permettete di usare <code>this.set(value)</code> internamente alla direttiva:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'example'</span>, &#123;</span><br><span class="line">  twoWay: <span class="literal">true</span>,</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.handler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// Passa i dati all'istanza</span></span><br><span class="line">      <span class="comment">// Se la direttiva è legata nel tipo v-example="a.b.c",</span></span><br><span class="line">      <span class="comment">// questo metodo cercherà di impostare `vm.a.b.c` con i valori passati</span></span><br><span class="line">      <span class="keyword">this</span>.set(<span class="keyword">this</span>.el.value)</span><br><span class="line">    &#125;.bind(<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.el.addEventListener(<span class="string">'input'</span>, <span class="keyword">this</span>.handler)</span><br><span class="line">  &#125;,</span><br><span class="line">  unbind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el.removeEventListener(<span class="string">'input'</span>, <span class="keyword">this</span>.handler)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="acceptStatement"><a href="#acceptStatement" class="headerlink" title="acceptStatement"></a>acceptStatement</h3><p>Se passate <code>acceptStatement:true</code> abiliterete la direttiva personalizzata ad accettare espressione su riga singola come fa <code>v-on</code>:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-my-directive</span>=<span class="string">"a++"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'my-directive'</span>, &#123;</span><br><span class="line">  acceptStatement: <span class="literal">true</span>,</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// In questo caso update riceverà l'espression a++ e verrà</span></span><br><span class="line">    <span class="comment">// eseguita</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Usate questa funziona in modo saggio, generalmente dovreste evitare manipolazioni tramite template.</p>
<h3 id="terminal"><a href="#terminal" class="headerlink" title="terminal"></a>terminal</h3><blockquote>
<p>1.0.19+</p>
</blockquote>
<p>Vue compila i template in modo ricorsivo attraversando tutto l’albero del DOM quando, però, incontra una direttiva con <strong>terminal</strong> smetterà di attraversare l’elemento in questione ed i suoi figli. Per esempio <code>v-if</code> e <code>v-for</code> sono entrambi direttive terminali.</p>
<p>Scrivere una direttiva terminale è un topic abbastanza avanzato e richiede una conoscenza adeguata della struttura di Vue e della sua pipeline di compilazion ma è comunque possibile farlo. Innanzitutto la vostra direttiva, per diventare terminale, deve includere la proprietà <code>terminal: true</code>. Assieme a tale proprietà è consigliato l’uso di <code>Vue.FragmentFactory</code> per la compilazione parziale.</p>
<p>Ecco un esempio pratico di come creare una direttiva terminale che compila ed “inietta” il suo contenuto in un altra posizione della pagina renderizzata:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> FragmentFactory = Vue.FragmentFactory</span><br><span class="line"><span class="keyword">var</span> remove = Vue.util.remove</span><br><span class="line"><span class="keyword">var</span> createAnchor = Vue.util.createAnchor</span><br><span class="line"></span><br><span class="line">Vue.directive(<span class="string">'inject'</span>, &#123;</span><br><span class="line">  terminal: <span class="literal">true</span>,</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> container = <span class="built_in">document</span>.getElementById(<span class="keyword">this</span>.arg)</span><br><span class="line">    <span class="keyword">this</span>.anchor = createAnchor(<span class="string">'v-inject'</span>)</span><br><span class="line">    container.appendChild(<span class="keyword">this</span>.anchor)</span><br><span class="line">    remove(<span class="keyword">this</span>.el)</span><br><span class="line">    <span class="keyword">var</span> factory = <span class="keyword">new</span> FragmentFactory(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.el)</span><br><span class="line">    <span class="keyword">this</span>.frag = factory.create(<span class="keyword">this</span>._host, <span class="keyword">this</span>._scope, <span class="keyword">this</span>._frag)</span><br><span class="line">    <span class="keyword">this</span>.frag.before(<span class="keyword">this</span>.anchor)</span><br><span class="line">  &#125;,</span><br><span class="line">  unbind: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.frag.remove()</span><br><span class="line">    remove(<span class="keyword">this</span>.anchor)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"modal"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-inject:modal</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>header<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>body<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Se volete effettivamente sostituire delle direttive che già esistono come <code>v-if</code> o <code>v-for</code> è raccomandato studiarsi bene le API interne di Vue.js Si noti che quando Vue.js trova una direttiva che implemente <code>terminal: true</code> non la gestirà in automatico come le direttive interne.</p>
<h3 id="priority"><a href="#priority" class="headerlink" title="priority"></a>priority</h3><p>Potete aggiungere un numero di priorità per la vostra direttiva (di default è impostato a 1000 per le direttive e 2000 per le direttive terminali). Una direttiva con una priorità più alta verrà processata prima delle altre dello stesso elemento. Le direttive con la priorità uguale, come quella di default, vengono processate in ordine di apparizione anche se l’ordine <strong>non è garantito</strong> per ogni browser.</p>
<p>Potete controllare la priorità per delle direttive integrate in Vue.js tramite <a href="/api/#Directives">La DOC delle API</a>. In aggiunta, le direttive <code>v-if</code> e <code>v-for</code> hanno sempre la più alta priorità durante la fase di processazione del DOM.</p>

    
    <div class="footer">
      Trovato un errore e vuoi contribuire alla documentazione?
      <a href="https://github.com/vuejs/it.vuejs.org/blob/master/src/guide/custom-directive.md" target="_blank">
        Modifica questa pagina su Github!
      </a>
    </div>
</div>

                
            </div>
            <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
            <script src="/js/smooth-scroll.min.js"></script>
            <script src="/js/common.js"></script>
        

        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                FastClick.attach(document.body);
            }, false);
        </script>
    </body>
</html>
